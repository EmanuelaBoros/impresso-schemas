{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://impresso.github.io/impresso-schemas/json/language_identification/language_identification.schema.json",
  "title": "Impresso Language Identification Information",
  "description": "A representation for informations relevant to impresso's content item language recognition. This defines the output of the following impresso NLP component. https://github.com/impresso/impresso-language-identification ",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "The unique identifier for a content item, cf. https://github.com/impresso/impresso-schemas/blob/master/json/newspaper/contentitem.schema.json"
    },
    "orig_lg": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/definitions/lang"
        }
      ],
      "description": "Original language of the content item as provided by the meta data, cf. https://github.com/impresso/impresso-schemas/blob/master/json/newspaper/contentitem.schema.json"
    },
    "lg": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/definitions/lang"
        }
      ],
      "description": "Computed language of the content item, cf. https://github.com/impresso/impresso-schemas/blob/master/json/newspaper/contentitem.schema.json"
    },
    "lg_decision": {
      "type": [
        "string",
        "null"
      ],
      "description": "An identifier for the decision strategy applied to the content item: 'all' = all LID systems/info agreed, ' "
    },
    "tp": {
      "type": "string",
      "description": "Type of the content item, cf. https://github.com/impresso/impresso-schemas/blob/master/json/newspaper/contentitem.schema.json"
    },
    "len": {
      "type": "integer",
      "description": "Number of characters of content item",
      "minimum": 0
    },
    "impresso_language_identifier": {
      "$ref": "#/definitions/version",
      "description": "Version information of used impresso language identifier script and file creation timestamp"
    },
    "language_identifier": {
      "$ref": "#/definitions/version",
      "description": "Version information of underlying language identifier script and file creation timestamp"
    },
    "alphabetical_ratio": {
      "type": ["number","null"],
      "description": "Ratio of alphabetical characters (letters) wtr to text length of content item",
      "minimum": 0,
      "maximum": 1
    },
    "langdetect": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/lid"
      },
      "description": "List of predicted languages using Langdetect, sorted by probability"
    },
    "langid": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/lid"
      },
      "description": "List of predicted languages using Langid, sorted by probability"
    },
    "impresso_ft": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/lid"
      },
      "description": "List of predicted languages using a FastText model trained on Impresso articles, sorted by probability"
    },
    "wp_ft": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/lid"
      },
      "description": "List of predicted languages using a FastText model trained on Wikipedia, sorted by probability"
    }
  },
  "required": [
    "tp",
    "id",
    "len",
    "lg",
    "orig_lg"
  ],
  "definitions": {
    "lid": {
      "description": "Predicted language and its probability",
      "type": "object",
      "properties": {
        "lang": {
          "$ref": "#/definitions/lang"
        },
        "prob": {
          "$ref": "#/definitions/prob"
        }
      },
      "required": [
        "lang",
        "prob"
      ]
    },
    "lang": {
      "type": "string",
      "description": "Two or three letter ISO language abbreviation, cf. https://en.wikipedia.org/wiki/List_of_ISO_639-2_codes or https://en.wikipedia.org/wiki/List_of_ISO_639-3_codes",
      "pattern": "^[a-z]{2,3}$"
    },
    "prob": {
      "type": "number",
      "description": "Probability of prediction",
      "minimum": 0,
      "maximum": 1
    },
    "version": {
      "type": "object",
      "properties": {
        "version": {
          "description": "Version of tool. Either date or output of command 'git describe'",
          "type": "string"
        },
        "ts": {
          "description": "timestamp of creation of the JSON file (e.g. '2018-09-18T08:00:08+')",
          "type": "string",
          "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(Z|\\+00:00)$"
        }
      },
      "required": [
        "ts",
        "version"
      ]
    }
  }
}
